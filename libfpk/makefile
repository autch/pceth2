# libfpk -- using FPK archive on P/ECE
# 	By Yui N., 2003.
# http://www.autch.net/

TARGET = libfpk.lib
# zlib Ç™åôÇ¢Ç»ÇÁÇ±Ç±Ç≈ -DLIBFPK_NO_ZLIB Ç∆Ç‚ÇÈÅI
CFLAGS = 

OBJS = fpkCloseArchive.o fpkExtractToBuffer.o fpkGetFileInfoN.o fpkGetFileInfoS.o \
	fpkOpenArchive.o hitodeLZSSDecoder.o fpkFileReadPos.o \
	zlibDecode.o inflate.o lzfDecompress.o
TESTS = test/makefile test/test.c test/test.pex test/test.srf test/mypmds.par
DEPFLAGS = -nostdinc -isystem c:/usr/piece/include -I- -I.

$(TARGET): $(OBJS)
	lib33 $@ $^

.c.o:
	pcc33 -c -O3 $(CFLAGS) $<

zip: $(TARGET)
	zip -9 libfpk *.c *.h *.lib *.txt makefile makefile.dep $(TESTS)

# óv Cygwin
clean:
	-rm -f *.o

# óv Cygwin
depend:
	echo "# auto-generated by \"make depend\"" > makefile.dep
	for f in *.c; do cpp -E -MM $(DEPFLAGS) $$f >> makefile.dep; done

include makefile.dep
